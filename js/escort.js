!function(e,t,o){"use strict";function n(t){this.$region=e(t),this.region=this.$region.data("region"),this.$document=e(document),this.$body=e("body"),this.setup()}e.extend(n,{instances:[],hideExpanded:function(){for(var e=0,t=this.instances.length;e<t;e++)this.instances[e].hideExpanded()}}),e.extend(n.prototype,{active:!1,setup:function(){var e=this;if(0===e.$region.find(".escort-item, [data-big-pipe-placeholder-id]").length)e.$region.remove(),e.$body.removeClass("has-escort-"+this.region),t.displace(!0);else{var o,n;e.$region.filter(".escort-vertical").on("mouseenter.escort",function(t){t.preventDefault(),n=e.$region.hasClass("escort-instant")?0:300,o=setTimeout(function(){e.showExpanded()},n)}).on("mouseleave.escort",function(e){e.preventDefault(),clearTimeout(o)})}},showExpanded:function(){var t=this;t.active||(t.active=!0,t.$body.addClass("show-escort-expanded-"+t.region),t.$document.on("click.escort-"+t.region,function(o){t.active&&!e(o.target).closest(t.$region).length&&t.hideExpanded()}),t.$region.trigger("escort-region-expanded:show",[t.$region]),t.$document.trigger("escort-region:show",[t.$region]))},hideExpanded:function(){var e=this;e.active&&(e.active=!1,e.$body.removeClass("show-escort-expanded-"+e.region),e.$document.off("click.escort-"+e.region),e.$region.trigger("escort-region-expanded:hide",[e.$region]),e.$document.trigger("escort-region:hide",[e.$region]))}}),t.behaviors.escort={attach:function(t){var o=e(t).find(".escort-region").once("escort-region").addClass("escort-region-processed");if(o.length){for(var i=0;i<o.length;i++)n.instances.push(new n(o[i]));setTimeout(function(){e("body").addClass("escort-ready")},10)}}},t.Escort=n}(jQuery,Drupal,Drupal.displace);